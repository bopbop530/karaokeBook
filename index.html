<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="version" content="2.5.0" />
    <title>Yomo Song List</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700&family=Noto+Sans+KR:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        /* --- BRIGHT BUBBLE GUM PALETTE (Light Mode) --- */
        --bg-color: #fff0f5;
        --header-bg: rgba(255, 255, 255, 0.9);
        --card-bg: #ffffff;
        --primary-text: #c71585;
        --secondary-text: #ff69b4;
        --muted-text: #db7093;
        --accent-pop: #ff1493;
        --shadow-color: rgba(255, 105, 180, 0.25);
        --border-radius: 20px;
      }

      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      html {
        scroll-behavior: smooth; /* NEW: Makes the jump smooth */
      }

      body {
        font-family: "Quicksand", "Noto Sans KR", sans-serif;
        background-color: var(--bg-color);
        color: var(--primary-text);
        background-image: radial-gradient(
            circle at 5% 5%,
            #ffe4e1 0%,
            transparent 20%
          ),
          radial-gradient(circle at 95% 95%, #e6e6fa 0%, transparent 20%);
        min-height: 100vh;
        padding-bottom: 100px;
      }

      /* --- HEADER --- */
      .header-container {
        position: sticky;
        top: 0;
        z-index: 100;
        background: var(--header-bg);
        backdrop-filter: blur(10px);
        padding: 20px;
        border-bottom: 2px solid #ffb6c1;
        box-shadow: 0 4px 15px var(--shadow-color);
        display: flex;
        flex-direction: column;
        gap: 15px;
        border-radius: 0 0 25px 25px;
        align-items: center;
      }

      h1 {
        font-size: 1.8rem;
        color: var(--accent-pop);
        font-weight: 800;
        text-align: center;
        letter-spacing: -1px;
      }

      /* --- CONTROLS --- */
      .controls {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
        width: 100%;
        max-width: 770px;
        align-items: center;
      }

      input,
      select,
      .toggle-btn {
        border: 2px solid #ffb6c1;
        padding: 10px 14px;
        border-radius: 50px;
        font-size: 0.95rem;
        outline: none;
        transition: 0.2s;
        font-family: inherit;
        font-weight: 600;
        height: 45px;
      }

      input {
        background: #fff;
        color: var(--primary-text);
        flex: 1;
      }

      select {
        background: #fff;
        color: var(--muted-text);
        width: auto;
      }

      #search {
        flex-grow: 1;
        width: auto;
      }

      .toggle-btn,
      #genre-filter {
        width: auto;
      }

      .toggle-btn {
        background: #fff;
        color: var(--accent-pop);
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 5px;
        white-space: nowrap;
      }

      .toggle-btn.active {
        background: var(--accent-pop);
        color: white;
        border-color: var(--accent-pop);
        box-shadow: 0 4px 10px rgba(255, 20, 147, 0.4);
      }

      input::placeholder {
        color: #ffc0cb;
      }

      /* --- LIST STYLING --- */
      #karaoke-book {
        padding: 25px;
        max-width: 800px;
        margin: 0 auto;
        /* NEW: Add right padding so text doesn't hit the new scrollbar */
        padding-right: 40px;
      }

      .section {
        margin-bottom: 30px;
        /* NEW: Scroll margin accounts for the sticky header height */
        scroll-margin-top: 220px;
      }

      .letter {
        font-size: 2rem;
        font-weight: 800;
        color: var(--accent-pop);
        background: white;
        display: inline-block;
        padding: 5px 20px;
        border-radius: 50px;
        margin-bottom: 15px;
        box-shadow: 0 4px 10px var(--shadow-color);
      }

      .artist {
        font-size: 1.2rem;
        font-weight: 700;
        color: var(--secondary-text);
        margin-top: 15px;
        margin-bottom: 10px;
        padding-left: 10px;
      }

      .song {
        background: var(--card-bg);
        padding: 18px 20px;
        border-radius: var(--border-radius);
        margin-bottom: 12px;
        font-size: 1.05rem;
        font-weight: 600;
        display: flex;
        align-items: center;
        flex-wrap: wrap;
        transition: transform 0.2s;
        box-shadow: 0 5px 15px rgba(230, 230, 250, 0.8);
        border: 2px solid transparent;
      }

      .song-title {
        margin-right: auto;
      }

      .song .highlight {
        color: var(--muted-text);
        font-size: 0.9em;
        margin-left: 8px;
        font-weight: 400;
      }

      .recommend-badge {
        font-size: 0.9rem;
        padding: 6px 14px;
        border-radius: 50px;
        margin-left: 12px;
        font-weight: 800;
        white-space: nowrap;
        position: relative;
        top: -1px;
        color: #c71585;
        background: linear-gradient(
          124deg,
          #ffc4e1,
          #ffe4e1,
          #fff4cc,
          #d4f0f0,
          #e0c3fc,
          #ffc4e1
        );
        background-size: 400% 400%;
        animation: rainbow-flow 6s ease infinite;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15),
          0 2px 10px rgba(255, 20, 147, 0.6);
        border: 2px solid white;
      }

      @keyframes rainbow-flow {
        0% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
        100% {
          background-position: 0% 50%;
        }
      }

      /* --- NEW: ALPHABET SIDEBAR (Index Scroll Bar) --- */
      .alpha-nav {
        position: fixed;
        right: 10px;
        top: 55%;
        transform: translateY(-50%);
        z-index: 90; /* Below Header (100) but above content */
        display: flex;
        flex-direction: column;
        gap: 3px;
        background: rgba(255, 255, 255, 0.6);
        backdrop-filter: blur(4px);
        padding: 8px 4px;
        border-radius: 20px;
        box-shadow: 0 2px 10px rgba(255, 105, 180, 0.2);
        max-height: 60vh;
        overflow-y: auto;
        /* Hide scrollbar for the nav itself */
        -ms-overflow-style: none;
        scrollbar-width: none;
      }
      .alpha-nav::-webkit-scrollbar {
        display: none;
      }

      .alpha-link {
        font-size: 0.75rem;
        color: var(--muted-text);
        text-decoration: none;
        text-align: center;
        padding: 2px 4px;
        font-weight: 700;
        transition: 0.2s;
        border-radius: 5px;
      }
      .alpha-link:hover {
        color: var(--accent-pop);
        transform: scale(1.3);
      }

      /* --- FAB & MODAL --- */
      .fab {
        bottom: 30px;
        right: 30px;
        background: var(--accent-pop);
        width: 65px;
        height: 65px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 6px 20px rgba(255, 20, 147, 0.4);
        cursor: pointer;
        z-index: 200;
        border: 4px solid white;
        color: white;
        font-size: 30px;
        transition: transform 0.2s;
      }
      .fab:hover {
        transform: scale(1.1) rotate(10deg);
      }

      #popup-backdrop {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(255, 255, 255, 0.6);
        backdrop-filter: blur(8px);
        z-index: 999;
        align-items: center;
        justify-content: center;
      }
      #popup-content {
        background: white;
        width: 85%;
        max-width: 400px;
        padding: 40px 20px 30px 20px;
        border-radius: 30px;
        text-align: center;
        border: 4px solid #ffb6c1;
        box-shadow: 0 20px 60px rgba(255, 105, 180, 0.3);
        position: relative;
      }
      #popup-close-btn {
        position: absolute;
        top: 15px;
        right: 15px;
        background: #ffe4e1;
        border: none;
        width: 36px;
        height: 36px;
        border-radius: 50%;
        color: var(--accent-pop);
        font-weight: bold;
        font-size: 1.2rem;
        cursor: pointer;
      }
      #roulette-container {
        height: 80px;
        overflow: hidden;
        border-top: 3px dashed #ffb6c1;
        border-bottom: 3px dashed #ffb6c1;
        background: #fffafa;
        margin-top: 10px;
      }
      .roulette-item {
        height: 80px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
      }
      .roulette-item span:first-child {
        color: var(--accent-pop) !important;
        font-size: 1.1rem;
      }
      .roulette-item span:last-child {
        color: #333 !important;
        font-size: 1.3em;
        font-weight: 700;
      }

      @media (max-width: 645px) {
        #search {
          width: auto;
          order: 1;
        }
        .toggle-btn,
        #genre-filter {
          flex: 1;
          order: 2;
          justify-content: center;
        }
        input {
          min-width: 438px;
        }
        .header-container {
          padding: 14px;
          gap: 0px;
        }
        .letter {
          font-size: 1.7rem;
          padding: 2px 14px;
          margin-bottom: 0;
        }
        .song {
          padding: 8px 20px;
        }
        .recommend-badge {
          top: -2px;
        }
      }

      @media (max-width: 550px) {
        input {
          min-width: 342px;
        }
        /* NEW: Adjust scroll margin for smaller headers */
        .section {
          scroll-margin-top: 250px;
        }
      }

      @media (max-width: 450px) {
        input {
          min-width: 241px;
        }
        .recommend-badge {
          margin-left: 10px;
          padding: 6px 8px;
        }
        .song {
          padding: 8px 12px;
        }
        /* NEW: Hide sidebar on very small screens if it overlaps content? 
           Or just make it smaller. Let's keep it small. */
        .alpha-nav {
          right: 2px;
          padding: 5px 2px;
        }
      }

      @media (max-width: 350px) {
        input {
          min-width: 142px;
        }
      }
    </style>
  </head>
  <body>
    <div class="header-container">
      <h1>
        <img
          src="https://em-content.zobj.net/source/apple/391/cherry-blossom_1f338.png"
          style="width: 36px; vertical-align: -6px; margin: 0 5px"
        />
        Song List
        <img
          src="https://em-content.zobj.net/source/apple/391/cherry-blossom_1f338.png"
          style="width: 36px; vertical-align: -6px; margin: 0 5px"
        />
      </h1>
      <div class="controls">
        <button id="random-song" class="fab">üé≤</button>
        <input type="text" id="search" placeholder="ÎÖ∏Îûò ÎòêÎäî Í∞ÄÏàò Í≤ÄÏÉâ..." />

        <button id="recommend-toggle" class="toggle-btn">
          <span>‚≠ê Ï∂îÏ≤úÍ≥°</span>
        </button>

        <select id="genre-filter">
          <option value="">Ï†ÑÏ≤¥ Ïû•Î•¥</option>
        </select>
      </div>
    </div>

    <div id="karaoke-book"></div>

    <div id="alpha-nav" class="alpha-nav"></div>

    <div id="popup-backdrop">
      <div id="popup-content"></div>
    </div>

    <script>
      const songList = [
        {
          letter: "„Ñ±",
          artists: [
            {
              name: "Í∞ïÏàòÏßÄ",
              songs: [{ track: "Î≥¥ÎûèÎπõ Ìñ•Í∏∞", genre: "romantic" }],
            },
            {
              name: "Í≤ΩÏÑú",
              songs: [
                { track: "ÎÇòÏùò XÏóêÍ≤å", genre: "ballad" },
                { track: "ÏπµÌÖåÏùº ÏÇ¨Îûë", genre: "indie", recommended: true },
              ],
            },
            {
              name: "ÍπÄÍ¥ëÏßÑ",
              songs: [{ track: "Ìé∏ÏßÄ", genre: "ballad" }],
            },
            {
              name: "ÍπÄÏú§ÏïÑ",
              songs: [{ track: "Î¥ÑÎÇ†ÏùÄ Í∞ÑÎã§", genre: "ballad" }],
            },
          ],
        },
        {
          letter: "„Ñ¥",
          artists: [
            {
              name: "ÎÇ®Í∑úÎ¶¨",
              songs: [{ track: "ÍπäÏùÄ Î∞§ÏùÑ ÎÇ†ÏïÑÏÑú", genre: "romantic" }],
            },
            {
              name: "Îâ¥ÏßÑÏä§",
              songs: [
                { track: "Ditto", genre: "dance" },
                { track: "Hurt", genre: "dance" },
                { track: "Hype boy", genre: "dance" },
                { track: "Super shy", genre: "dance" },
              ],
            },
          ],
        },
        {
          letter: "„Ñ∑",
          artists: [
            {
              name: "Îã§ÎπÑÏπò",
              songs: [{ track: "8282(300)", genre: "dance" }],
            },
            {
              name: "Îçî ÎÑõÏ∏†",
              songs: [{ track: "ÏÇ¨ÎûëÏùò Î∞îÎ≥¥", genre: "rock" }],
            },
          ],
        },
        {
          letter: "„Ñπ",
          artists: [
            {
              name: "ÎüºÎ∏îÌîºÏâ¨",
              songs: [
                { track: "I Go", genre: "rock" },
                { track: "ÎÇ¥ ÏÇ¨Îûë ÎÇ¥ Í≥ÅÏóê", genre: "ballad" },
                { track: "ÎπÑÏôÄÎãπÏã†", genre: "ballad" },
              ],
            },
            {
              name: "Î¶∞",
              songs: [{ track: "ÏãúÍ∞ÑÏùÑ Í±∞Ïä¨Îü¨", genre: "ballad" }],
            },
          ],
        },
        {
          letter: "„ÖÅ",
          artists: [
            {
              name: "ÎßàÌÅ¨ÌàΩ",
              songs: [{ track: "Marry me", genre: "romantic" }],
            },
            {
              name: "ÎßàÌã¥Ïä§ÎØ∏Ïä§",
              songs: [
                { track: "Î¥Ñ Í∑∏Î¶¨Í≥† ÎÑà", genre: "romantic", recommended: true },
              ],
            },
            {
              name: "Î©úÎ°úÎßùÏä§",
              songs: [
                { track: "Î∂ÄÎÅÑÎüº", genre: "romantic" },
                { track: "ÏÇ¨ÎûëÏù∏Í∞ÄÎ¥ê", genre: "romantic" },
                { track: "ÏÑ†Î¨º", genre: "romantic" },
              ],
            },
            {
              name: "ÎØºÏÑ§",
              songs: [{ track: "100% Î°úÎß®Ìã±", genre: "indie" }],
            },
          ],
        },
        {
          letter: "„ÖÇ",
          artists: [
            {
              name: "Î∞ïÎ≥¥ÏòÅ",
              songs: [
                { track: "ÎÇòÏùò ÏôïÏûêÎãò", genre: "romantic" },
                { track: "ÏïÑÎßàÎèÑ Í∑∏Í±¥", genre: "indie" },
              ],
            },
            {
              name: "Î∞ïÏ†ïÌòÑ",
              songs: [{ track: "Îã¨ÏïÑÏöî", genre: "romantic" }],
            },
            {
              name: "Î∞ïÏßÑÏòÅ",
              songs: [{ track: "Honey", genre: "dance" }],
            },
            {
              name: "Î∞ïÌòúÍ≤Ω",
              songs: [{ track: "ÎèôÌôî", genre: "romantic" }],
            },
            {
              name: "Î∞±ÏòàÎ¶∞",
              songs: [
                { track: "Rest", genre: "indie", recommended: true },
                { track: "ÏÇ∞Ï±Ö", genre: "indie" },
              ],
            },
            {
              name: "Î±ÖÌÅ¨",
              songs: [{ track: "Í∞ÄÏßà Ïàò ÏóÜÎäî ÎÑà", genre: "ballad" }],
            },
            {
              name: "Î≤ÑÏä§Ïª§Î≤ÑÏä§Ïª§",
              songs: [
                { track: "Í≥®Î™©Í∏∏ Ïñ¥Í∑ÄÏóêÏÑú", genre: "indie" },
                { track: "Í∑∏ÎåÄ ÏûÖÏà†Ïù¥", genre: "indie" },
                { track: "ÍΩÉÏÜ°Ïù¥Í∞Ä", genre: "indie" },
                { track: "Î≤öÍΩÉÏóîÎî©", genre: "indie" },
                { track: "ÏïÑÎ¶ÑÎã§Ïö¥ ÎÇòÏù¥", genre: "indie" },
              ],
            },
            {
              name: "Î≤§",
              songs: [{ track: "You", genre: "ballad" }],
            },
            {
              name: "Î≥ºÎπ®Í∞Ñ ÏÇ¨Ï∂òÍ∏∞",
              songs: [
                { track: "Î∞îÎûåÏÇ¨Îûå", genre: "indie" },
                { track: "Ïã¨Ïà†", genre: "indie", recommended: true },
                { track: "Ïç∏ÌÉàÍ±∞Ïïº", genre: "indie" },
                { track: "Ïö∞Ï£ºÎ•º Ï§ÑÍ≤å", genre: "indie" },
                { track: "Ìíà", genre: "indie" },
                { track: "ÌîÑÎ¶¨ÏßÄÏïÑ", genre: "indie", recommended: true },
              ],
            },
          ],
        },
        {
          letter: "„ÖÖ",
          artists: [
            {
              name: "ÏÉòÍπÄ",
              songs: [
                { track: "Like a fool", genre: "r&b", recommended: true },
              ],
            },
            {
              name: "ÏÑúÏòÅÏùÄ",
              songs: [
                { track: "Ï¢ãÏïÑÏ¢ãÏïÑ", genre: "romantic", recommended: true },
              ],
            },
            {
              name: "ÏÜåÎÖÄÏãúÎåÄ",
              songs: [{ track: "ÏÇ¨ÎûëÏùÄ ÏÑ†Ïú®ÏùÑ ÌÉÄÍ≥†", genre: "romantic" }],
            },
            {
              name: "ÏÜåÎûÄ",
              songs: [{ track: "ÎØ∏Ï≥§ÎÇòÎ¥ê", genre: "indie" }],
            },
            {
              name: "Ïä§Ìä∏Î†àÏù¥",
              songs: [{ track: "ÎÑà,ÎÑà", genre: "ballad", recommended: true }],
            },
            {
              name: "Ïã†Ïö©Ïû¨",
              songs: [{ track: "ÏÇ¨ÎûëÌïòÎäî Í∑∏ÎåÄÏó¨", genre: "ballad" }],
            },
            {
              name: "Ïã†ÌòÑÌù¨ÏôÄÍπÄÎ£®Ìä∏",
              songs: [{ track: "Ïò§Îπ†Ïïº", genre: "indie" }],
            },
            {
              name: "Ïã¨Í∑úÏÑ†",
              songs: [{ track: "Î∂ÄÎîî", genre: "ballad" }],
            },
            {
              name: "Ïã≠ÏÑºÏπò10cm",
              songs: [
                { track: "Island", genre: "indie" },
                { track: "Pet", genre: "indie", recommended: true },
                { track: "Talk", genre: "indie" },
                { track: "Í∑∏Í≤å ÏïÑÎãàÍ≥†", genre: "indie" },
                { track: "ÎÉÑÏÉà ÎÇòÎäî Ïó¨Ïûê", genre: "indie" },
                { track: "Îß§Ìä∏Î¶¨Ïä§", genre: "indie" },
                { track: "Î¥ÑÏù¥ Ï¢ãÎÉê?", genre: "indie", recommended: true },
                { track: "ÎπÑÎ∞ÄÏó∞Ïï†", genre: "indie" },
                {
                  track: "ÏÇ¨ÎûëÏùÄ ÏùÄÌïòÏàòÎã§Î∞©",
                  genre: "indie",
                  recommended: true,
                },
                { track: "Ïä§ÌÜ†Ïª§", genre: "indie", recommended: true },
                { track: "Ïì∞Îã¥Ïì∞Îã¥", genre: "indie" },
                { track: "ÏïàÏïÑÏ§òÏöî", genre: "indie" },
                { track: "Ïï†ÏÉÅ", genre: "indie" },
                {
                  track: "Ïò§Îäò Î∞§ÏùÄ Ïñ¥Îë†Ïù¥ Î¨¥ÏÑúÏõåÏöî",
                  genre: "indie",
                  recommended: true,
                },
                { track: "Ï£ΩÍ≤†ÎÑ§", genre: "indie", recommended: true },
                { track: "Ìè∞ÏÑúÌä∏", genre: "indie", recommended: true },
              ],
            },
            {
              name: "Ïî®Ïïº",
              songs: [
                { track: "Í≤∞ÌòºÌï†ÍπåÏöî", genre: "romantic" },
                { track: "ÏÇ¨ÎûëÏùòÏù∏ÏÇ¨", genre: "ballad" },
              ],
            },
            {
              name: "Ïî®ÏóîÎ∏îÎ£®",
              songs: [
                { track: "ÏÇ¨ÎûëÎπõ", genre: "romantic", recommended: true },
              ],
            },
          ],
        },
        {
          letter: "„Öá",
          artists: [
            {
              name: "1415(ÏùºÏÇ¨ÏùºÏò§)",
              songs: [{ track: "ÏÑ†ÏùÑ Í∑∏Ïñ¥Ï£ºÎçòÍ∞Ä", genre: "indie" }],
            },
            {
              name: "ÏïÑÏù¥Ïú†",
              songs: [
                { track: "Love poem", genre: "ballad" },
                { track: "Modern times", genre: "dance" },
                { track: "Rain drop", genre: "ballad" },
                { track: "Someday", genre: "ballad", recommended: true },
                { track: "Í≥†ÏñëÏù¥", genre: "romantic" },
                { track: "Í∏àÏöîÏùºÏóê ÎßåÎÇòÏöî", genre: "romantic" },
                { track: "ÎÑàÎûëÎÇò", genre: "dance" },
                { track: "Î†àÏòπ", genre: "dance" },
                { track: "ÎßàÏùåÏùÑ ÎìúÎ†§Ïöî", genre: "ballad" },
                { track: "Î¨¥Î¶é", genre: "ballad", recommended: true },
                { track: "ÎØ∏Î¶¨ Î©îÎ¶¨ ÌÅ¨Î¶¨Ïä§ÎßàÏä§", genre: "romantic" },
                { track: "Î∞§Ìé∏ÏßÄ", genre: "ballad" },
                { track: "Î≥µÏà≠ÏïÑ", genre: "romantic" },
                { track: "Îπ®Í∞ÑÏö¥ÎèôÌôî", genre: "romantic" },
                { track: "Ïù¥Îü∞ ÏóîÎî©", genre: "ballad" },
                { track: "ÏûÖÏà†ÏÇ¨Ïù¥", genre: "romantic" },
                { track: "Ï¢ãÏùÄ ÎÇ†", genre: "dance" },
              ],
            },
            {
              name: "ÏïÑÏùºÎ¶ø",
              songs: [{ track: "ÎßàÍ∑∏ÎÑ§Ìã±", genre: "dance" }],
            },
            {
              name: "ÏïàÏòàÏùÄ",
              songs: [{ track: "ÏÉÅÏÇ¨Ìôî", genre: "ballad", recommended: true }],
            },
            {
              name: "Ïï†Ïã§Î¶¨",
              songs: [{ track: "Lucky", genre: "romantic" }],
            },
            {
              name: "Ïñ¥Ïø†Î£®Î∏å",
              songs: [
                { track: "Rainy", genre: "acoustic" },
                { track: "Í≥†Î∞±", genre: "acoustic" },
                { track: "Ïû†ÍπêÎßåÏöî", genre: "acoustic", recommended: true },
              ],
            },
            {
              name: "Ïñ¥Ïø†Ïä§Ìã± ÏΩúÎùºÎ≥¥",
              songs: [
                { track: "Í∑∏ÎåÄÏôÄ ÎÇò ÏÑ§Î†àÏûÑ", genre: "acoustic" },
                { track: "Î¨òÌï¥, ÎÑàÏôÄ", genre: "acoustic", recommended: true },
              ],
            },
            {
              name: "ÏóêÏΩî",
              songs: [{ track: "ÌñâÎ≥µÌïú ÎÇòÎ•º", genre: "romantic" }],
            },
            {
              name: "Ïò§Ïô†",
              songs: [{ track: "Picnic", genre: "acoustic" }],
            },
            {
              name: "Ïò§ÌòÅ",
              songs: [{ track: "ÏÜåÎÖÄ", genre: "indie" }],
            },
            {
              name: "ÏõêÎ™®Ï∞¨Ïä§",
              songs: [
                { track: "ÎÑê ÏÉùÍ∞ÅÌï¥", genre: "indie", recommended: true },
              ],
            },
            {
              name: "Ïú†Ïû¨Ìïò",
              songs: [{ track: "ÏÇ¨ÎûëÌïòÍ∏∞ ÎïåÎ¨∏Ïóê", genre: "ballad" }],
            },
            {
              name: "Ïú§Ìïò",
              songs: [
                { track: "ÎπÑÎ∞ÄÎ≤àÌò∏486(300)", genre: "ballad" },
                { track: "ÏÇ¨Í±¥Ïùò ÏßÄÌèâÏÑ†(300)", genre: "ballad" },
              ],
            },
            {
              name: "Ïù¥ÏÑ†Ìù¨",
              songs: [{ track: "Ïó¨Ïö∞ÎπÑ", genre: "ballad" }],
            },
            {
              name: "Ïù¥ÏäπÍ∏∞",
              songs: [
                { track: "Smile boy", genre: "rock" },
                { track: "ÎÇ¥ Ïó¨ÏûêÎùºÎãàÍπå", genre: "ballad" },
              ],
            },
            {
              name: "Ïù¥ÏäπÌõà",
              songs: [{ track: "ÎÇ¥Í∞Ä ÎßéÏù¥ ÏÇ¨ÎûëÌï¥Ïöî", genre: "ballad" }],
            },
            {
              name: "Ïù¥ÏòàÏ§Ä",
              songs: [{ track: "ÎØ∏ÏπúÏÜåÎ¶¨", genre: "ballad" }],
            },
            {
              name: "ÏùµÏä§",
              songs: [{ track: "Ïûò Î∂ÄÌÉÅÎìúÎ¶ΩÎãàÎã§", genre: "rock" }],
            },
          ],
        },
        {
          letter: "„Öà",
          artists: [
            {
              name: "ÏûêÏù¥Ïñ∏Ìã∞",
              songs: [
                { track: "Í∫ºÎÇ¥Î®πÏñ¥Ïöî", genre: "r&b" },
                { track: "ÎªîÌïú Î©úÎ°úÎîî", genre: "r&b" },
              ],
            },
            {
              name: "ÏûêÏ†ÑÍ±∞ÌÉÑÌíçÍ≤Ω",
              songs: [{ track: "ÎÑàÏóêÍ≤å ÎÇú, ÎÇòÏóêÍ≤å ÎÑå", genre: "indie" }],
            },
            {
              name: "Ïû•Í∑ºÏÑù",
              songs: [{ track: "Ïñ¥Îñ°ÌïòÏ£†", genre: "ballad" }],
            },
            {
              name: "Ïû•Ïú§Ï†ï",
              songs: [{ track: "ÏïΩÏÜç", genre: "ballad", recommended: true }],
            },
            {
              name: "Ï†ïÏóΩ",
              songs: [{ track: "Nothing better", genre: "r&b" }],
            },
            {
              name: "Ï†úÏù¥Î†àÎπó",
              songs: [
                { track: "Happy things", genre: "indie" },
                { track: "ÏöîÏ¶ò ÎÑà ÎßêÏïº", genre: "indie", recommended: true },
              ],
            },
            {
              name: "Ï°∞Ïù¥",
              songs: [
                { track: "Happy birthday to you", genre: "romantic" },
                { track: "ÎÇ¥Í≤å Ïò§Îäî Í∏∏", genre: "ballad" },
                { track: "ÏïàÎÖï", genre: "dance" },
                { track: "Ï¢ãÏùÄ ÏÇ¨Îûå ÏûàÏúºÎ©¥ ÏÜåÍ∞úÏãúÏºúÏ§ò", genre: "romantic" },
              ],
            },
            {
              name: "Ï°∞Ïö©ÌïÑ",
              songs: [{ track: "Îã®Î∞úÎ®∏Î¶¨", genre: "dance" }],
            },
            {
              name: "Ï•¨ÏñºÎ¶¨",
              songs: [{ track: "ÎãàÍ∞Ä Ï∞∏ Ï¢ãÏïÑ", genre: "dance" }],
            },
          ],
        },
        {
          letter: "„Öä",
          artists: [
            {
              name: "Ï∞∏Íπ®ÏôÄ ÏÜúÏÇ¨ÌÉï",
              songs: [{ track: "ÌÇ§Ïä§ÎØ∏", genre: "indie", recommended: true }],
            },
            {
              name: "ÏµúÏú†Î¶¨",
              songs: [
                { track: "Î∞îÎã§", genre: "indie" },
                { track: "Ïà≤", genre: "indie" },
              ],
            },
            {
              name: "ÏπòÏ¶à",
              songs: [
                { track: "Mood indigo", genre: "indie" },
                { track: "ÏÇ¨ÎûëÏù¥ÎùºÏò§", genre: "indie", recommended: true },
              ],
            },
          ],
        },
        {
          letter: "„Öã",
          artists: [
            {
              name: "QWER",
              songs: [
                { track: "Í≥†ÎØºÏ§ëÎèÖ", genre: "rock" },
                { track: "ÎÇ¥ Ïù¥Î¶Ñ ÎßëÏùå", genre: "rock" },
              ],
            },
            {
              name: "ÏºÄÏù¥Ïãú",
              songs: [
                { track: "ÏÜêÏùÑ Ïû°ÏïÑÏ§ò", genre: "ballad", recommended: true },
              ],
            },
            {
              name: "ÌÅ¨Îü¨Ïâ¨",
              songs: [
                { track: "Í∞ÄÎÅî", genre: "r&b" },
                { track: "ÎØ∏Ïõå", genre: "r&b" },
              ],
            },
          ],
        },
        {
          letter: "„Öå",
          artists: [
            {
              name: "2am",
              songs: [{ track: "Ïñ¥Îñ°ÌïòÏ£†", genre: "dance" }],
            },
            {
              name: "ÌÉúÏó∞",
              songs: [{ track: "Í∑∏ÎåÄÎùºÎäî Ïãú", genre: "ballad" }],
            },
            {
              name: "Ìã∞ÌååÎãà",
              songs: [{ track: "ÎÇò ÌòºÏûêÏÑú", genre: "ballad" }],
            },
            {
              name: "ÌåÄ",
              songs: [
                { track: "ÏÇ¨ÎûëÌïú ÎßåÌÅº", genre: "ballad" },
                { track: "ÏÇ¨ÎûëÌï©ÎãàÎã§", genre: "ballad" },
              ],
            },
          ],
        },
        {
          letter: "„Öç",
          artists: [
            {
              name: "40",
              songs: [
                { track: "Îì£ÎäîÌé∏ÏßÄ", genre: "r&b" },
                { track: "Î¥ÑÏùÑ ÎÖ∏ÎûòÌïòÎã§", genre: "r&b" },
              ],
            },
            {
              name: "ÌéÄÏπò",
              songs: [{ track: "Î∞§Ïù¥ÎêòÎãàÍπå", genre: "ballad" }],
            },
            {
              name: "Ìè¨Îß®",
              songs: [{ track: "Baby baby", genre: "ballad" }],
            },
            {
              name: "Ìè¨ÏßÄÏÖò",
              songs: [{ track: "ÌïòÎ£®", genre: "ballad" }],
            },
          ],
        },
        {
          letter: "„Öé",
          artists: [
            {
              name: "ÌóàÍ∞Å",
              songs: [{ track: "1440", genre: "romantic" }],
            },
            {
              name: "ÌóàÎ∞çÏñ¥Î∞òÏä§ÌÖåÎ†àÏò§",
              songs: [{ track: "ÏÉêÎü¨Îìú Í∏∞ÎÖêÏùº", genre: "indie" }],
            },
            {
              name: "ÌòÅÏò§",
              songs: [{ track: "ÏúÑÏûâÏúÑÏûâ", genre: "indie" }],
            },
          ],
        },
        {
          letter: "A",
          artists: [
            {
              name: "Anne-Marie",
              songs: [{ track: "2002", genre: "pop" }],
            },
            {
              name: "Asher Book",
              songs: [{ track: "Try", genre: "pop" }],
            },
          ],
        },
        {
          letter: "C",
          artists: [
            {
              name: "ChoQMay (Ï¥àÌÅêÎ©îÏù¥)",
              songs: [
                {
                  track: "Âêõ„ÅÆÂΩºÊ∞è„Å´„Å™„Çä„Åü„ÅÑ (ÎÑàÏùò Ïó∞Ïù∏Ïù¥ ÎêòÍ≥† Ïã∂Ïñ¥)",
                  genre: "jpop",
                },
              ],
            },
          ],
        },
        {
          letter: "F",
          artists: [
            {
              name: "Frank Sinatra",
              songs: [
                {
                  track: "Fly me to the moon",
                  genre: "ballad",
                  recommended: true,
                },
              ],
            },
            {
              name: "Frankie Valli",
              songs: [
                {
                  track: "Can't take my eyes off you",
                  genre: "ballad",
                  recommended: true,
                },
              ],
            },
          ],
        },
        {
          letter: "G",
          artists: [
            {
              name: "Glen Hansard & Marketa Irglova",
              songs: [{ track: "Falling Slowly", genre: "ballad" }],
            },
          ],
        },
        {
          letter: "K",
          artists: [
            {
              name: "Karina",
              songs: [{ track: "Slow motion", genre: "pop" }],
            },
            {
              name: "Kelly Clarkson",
              songs: [
                { track: "White Christmas", genre: "pop", recommended: true },
              ],
            },
          ],
        },
        {
          letter: "M",
          artists: [
            {
              name: "M.Y.M.P",
              songs: [{ track: "Say you love me", genre: "ballad" }],
            },
          ],
        },
        {
          letter: "N",
          artists: [
            {
              name: "Natalie Cole",
              songs: [{ track: "L.O.V.E", genre: "ballad", recommended: true }],
            },
          ],
        },
        {
          letter: "S",
          artists: [
            {
              name: "Sixpence None The Richer",
              songs: [{ track: "Kiss Me", genre: "pop", recommended: true }],
            },
            {
              name: "Sneha",
              songs: [
                { track: "So this is love", genre: "pop", recommended: true },
              ],
            },
            {
              name: "Stephanie Poetri",
              songs: [{ track: "I love you 3000", genre: "pop" }],
            },
          ],
        },
        {
          letter: "Y",
          artists: [
            {
              name: "Yuuri",
              songs: [{ track: "„Éô„ÉÜ„É´„ÇÆ„Ç¶„Çπ (Î≤†ÌÖîÍ∏∞Ïö∞Ïä§)", genre: "jpop" }],
            },
          ],
        },
      ];

      const genreCategory = {
        ballad: "Î∞úÎùºÎìú",
        jpop: "ÏùºÎ≥∏",
        pop: "Ìåù",
        dance: "ÎåÑÏä§",
        romantic: "Î°úÎß®Ìã±",
        indie: "Ïù∏Îîî",
        "r&b": "R&B",
        acoustic: "Ïñ¥Ïø†Ïä§Ìã±",
        rock: "Î°ù",
      };

      const container = document.getElementById("karaoke-book");
      const searchInput = document.getElementById("search");
      const genreFilter = document.getElementById("genre-filter");
      const recommendToggle = document.getElementById("recommend-toggle");
      const alphaNav = document.getElementById("alpha-nav"); // NEW

      let showRecommendedOnly = false;

      // NEW: Function to render the side navigation
      function renderAlphaNav(filteredList) {
        alphaNav.innerHTML = "";

        // If list is empty or very short, hide nav
        if (!filteredList || filteredList.length === 0) {
          alphaNav.style.display = "none";
          return;
        } else {
          alphaNav.style.display = "flex";
        }

        filteredList.forEach((section) => {
          const link = document.createElement("a");
          link.className = "alpha-link";
          link.href = `#sec-${section.letter}`;
          link.textContent = section.letter;

          // Optional: Add click listener for extra smoothness control
          link.addEventListener("click", (e) => {
            // e.preventDefault();
            // Standard anchor behavior works fine with CSS scroll-behavior: smooth
          });

          alphaNav.appendChild(link);
        });
      }

      function render(filteredList) {
        container.innerHTML = "";

        // Call the new sidebar function every time we render
        renderAlphaNav(filteredList); // NEW

        if (filteredList.length === 0) {
          container.innerHTML =
            "<div style='text-align:center; color:#db7093; margin-top:20px;'>Í≤ÄÏÉâ Í≤∞Í≥ºÍ∞Ä ÏóÜÏäµÎãàÎã§.</div>";
          return;
        }

        filteredList.forEach((section) => {
          const sectionDiv = document.createElement("div");
          sectionDiv.className = "section";
          // NEW: Add an ID to the section so the sidebar links can find it
          sectionDiv.id = `sec-${section.letter}`;

          const letter = document.createElement("div");
          letter.className = "letter";
          letter.textContent = `${section.letter}`;
          sectionDiv.appendChild(letter);

          section.artists.forEach((artist) => {
            const artistDiv = document.createElement("div");
            artistDiv.className = "artist";
            artistDiv.textContent = artist.name;
            sectionDiv.appendChild(artistDiv);

            artist.songs.forEach((song) => {
              const songDiv = document.createElement("div");
              songDiv.className = "song";

              const track = song.track;
              const match = track.match(/^(.*?)(\(|Ôºà)(.*?)(\)|Ôºâ)$/);

              let htmlContent = "";
              if (match && match[3].trim() !== "=I") {
                htmlContent = `${match[1].trim()} <span class="highlight">(${match[3].trim()})</span>`;
              } else {
                htmlContent = track;
              }

              if (song.recommended) {
                htmlContent += ` <span class="recommend-badge">‚≠ê Ï∂îÏ≤ú!</span>`;
              }

              songDiv.innerHTML = `<span class="song-title">${htmlContent}</span>`;
              sectionDiv.appendChild(songDiv);
            });
          });

          container.appendChild(sectionDiv);
        });
      }

      function filterSongs() {
        const query = searchInput.value;
        const genre = genreFilter.value;

        const hasQuery = query && query.trim() !== "";
        const hasGenre = genre && genre.trim() !== "";

        const lowerQuery = hasQuery ? query.toLowerCase() : null;

        return songList
          .map((section) => {
            const filteredArtists = section.artists
              .map((artist) => {
                let filteredSongs = artist.songs;

                if (hasGenre) {
                  filteredSongs = filteredSongs.filter(
                    (song) => song.genre === genre
                  );
                }

                if (hasQuery) {
                  const artistMatches = artist.name
                    .toLowerCase()
                    .includes(lowerQuery);
                  if (!artistMatches) {
                    filteredSongs = filteredSongs.filter((song) =>
                      song.track.toLowerCase().includes(lowerQuery)
                    );
                  }
                }

                if (showRecommendedOnly) {
                  filteredSongs = filteredSongs.filter(
                    (song) => song.recommended === true
                  );
                }

                if (filteredSongs.length > 0) {
                  return { ...artist, songs: filteredSongs };
                }
                return null;
              })
              .filter(Boolean);

            if (filteredArtists.length > 0) {
              return { ...section, artists: filteredArtists };
            }
            return null;
          })
          .filter(Boolean);
      }

      const genreEntries = Object.entries(genreCategory).sort((a, b) => {
        const isAKorean = /[Í∞Ä-Ìû£]/.test(a[1]);
        const isBKorean = /[Í∞Ä-Ìû£]/.test(b[1]);
        if (isAKorean && !isBKorean) return -1;
        if (!isAKorean && isBKorean) return 1;
        return a[1].localeCompare(b[1], isAKorean ? "ko" : "en");
      });
      genreEntries.forEach(([key, value]) => {
        const option = document.createElement("option");
        option.value = key;
        option.textContent = value;
        genreFilter.appendChild(option);
      });

      searchInput.addEventListener("input", function () {
        render(filterSongs());
      });

      genreFilter.addEventListener("change", function () {
        render(filterSongs());
      });

      recommendToggle.addEventListener("click", function () {
        showRecommendedOnly = !showRecommendedOnly;
        this.classList.toggle("active");
        render(filterSongs());
      });

      render(songList);

      // --- RANDOM SONG LOGIC ---
      document
        .getElementById("random-song")
        .addEventListener("click", function () {
          const allSongs = songList.flatMap((section) =>
            section.artists.flatMap((artist) =>
              artist.songs.map((song) => ({
                artist: artist.name,
                track: song.track,
              }))
            )
          );

          const rouletteItems = [];
          for (let i = 0; i < 10; i++) {
            rouletteItems.push(
              allSongs[Math.floor(Math.random() * allSongs.length)]
            );
          }
          const finalSong =
            allSongs[Math.floor(Math.random() * allSongs.length)];
          rouletteItems.push(finalSong);

          const rouletteList = rouletteItems
            .map(
              (song) =>
                `<div class="roulette-item">
                <span style="font-weight:900;">${song.artist}</span>
                <span style="font-weight:600;">${song.track}</span>
             </div>`
            )
            .join("");

          const popupBackdrop = document.getElementById("popup-backdrop");
          const popupContent = document.getElementById("popup-content");
          popupBackdrop.style.display = "flex";

          popupContent.innerHTML = `
            <button id="popup-close-btn">‚úñ</button>
            <div style="font-size:1.4em;color:#ff1493;margin-bottom:10px; font-weight:800;">ÎûúÎç§ ÎÖ∏Îûò!</div>
            <div id="roulette-container"><div class="roulette-list">${rouletteList}</div></div>
          `;

          document
            .getElementById("popup-close-btn")
            .addEventListener("click", () => {
              popupBackdrop.style.display = "none";
            });

          const listElem = popupContent.querySelector(".roulette-list");
          const itemHeight = 80;
          let spins = 0,
            maxSpins = 20,
            position = itemHeight * (rouletteItems.length - 1),
            speed = 0.7;

          listElem.style.transform = `translateY(-${position}px)`;
          void listElem.offsetHeight;

          setTimeout(() => {
            function animateRoulette() {
              const elapsed = 16;
              if (spins < maxSpins) {
                if (spins > maxSpins - 10) speed *= 0.97;
                position -= speed * elapsed;
                if (position < 0) position = 0;
                listElem.style.transform = `translateY(-${position}px)`;
                spins += (speed * elapsed) / itemHeight;
                requestAnimationFrame(animateRoulette);
              } else {
                listElem.style.transition =
                  "transform 0.7s cubic-bezier(.4,2,.3,1)";
                listElem.style.transform = `translateY(0px)`;
                setTimeout(() => {
                  if (popupBackdrop.style.display !== "none") {
                    popupContent.innerHTML = `
                        <button id="popup-close-btn">‚úñ</button>
                        <div style="font-size:1.4em;color:#ff1493;margin-bottom:15px; font-weight:800;">ÎûúÎç§ ÎÖ∏Îûò!</div>
                        <div style="font-size:1.1em;color:#333; margin-bottom:10px;">
                          <span style="font-weight:900; color:#ff69b4; display:block; margin-bottom:5px; font-size:1.2em;">${finalSong.artist}</span>
                          <span style="font-weight:600;">${finalSong.track}</span>
                        </div>
                      `;
                    document
                      .getElementById("popup-close-btn")
                      .addEventListener("click", () => {
                        popupBackdrop.style.display = "none";
                      });
                  }
                }, 500);
              }
            }
            animateRoulette();
          }, 10);
        });
    </script>
  </body>
</html>
